import {
  h,
  nextTick
} from "./chunk-MEOA3D7T.js";
import "./chunk-VK5M77CT.js";

// node_modules/@jambonn/vue-lazyload/dist/vue-lazyload.es.js
var i = typeof window != "undefined" && window !== null;
var s = function() {
  if (i && "IntersectionObserver" in window && "IntersectionObserverEntry" in window && "intersectionRatio" in window.IntersectionObserverEntry.prototype)
    return "isIntersecting" in window.IntersectionObserverEntry.prototype || Object.defineProperty(window.IntersectionObserverEntry.prototype, "isIntersecting", { get: function() {
      return this.intersectionRatio > 0;
    } }), true;
  return false;
}();
var r = "event";
var n = "observer";
var o = function() {
  if (i)
    return typeof window.CustomEvent == "function" ? window.CustomEvent : (t.prototype = window.Event.prototype, t);
  function t(t2, e) {
    e = e || { bubbles: false, cancelable: false, detail: void 0 };
    const i2 = document.createEvent("CustomEvent");
    return i2.initCustomEvent(t2, e.bubbles, e.cancelable, e.detail), i2;
  }
}();
function a(t, e) {
  if (!t.length)
    return;
  const i2 = t.indexOf(e);
  return i2 > -1 ? t.splice(i2, 1) : void 0;
}
function h2(t, e) {
  if (t.tagName !== "IMG" || !t.getAttribute("data-srcset"))
    return;
  let i2 = t.getAttribute("data-srcset");
  const s2 = t.parentNode.offsetWidth * e;
  let r2, n2, o2;
  i2 = i2.trim().split(",");
  const a2 = i2.map((t2) => (t2 = t2.trim(), r2 = t2.lastIndexOf(" "), r2 === -1 ? (n2 = t2, o2 = 999998) : (n2 = t2.substr(0, r2), o2 = parseInt(t2.substr(r2 + 1, t2.length - r2 - 2), 10)), [o2, n2]));
  a2.sort(function(t2, e2) {
    if (t2[0] < e2[0])
      return 1;
    if (t2[0] > e2[0])
      return -1;
    if (t2[0] === e2[0]) {
      if (e2[1].indexOf(".webp", e2[1].length - 5) !== -1)
        return 1;
      if (t2[1].indexOf(".webp", t2[1].length - 5) !== -1)
        return -1;
    }
    return 0;
  });
  let h3, d2 = "";
  for (let l2 = 0; l2 < a2.length; l2++) {
    h3 = a2[l2], d2 = h3[1];
    const t2 = a2[l2 + 1];
    if (t2 && t2[0] < s2) {
      d2 = h3[1];
      break;
    }
    if (!t2) {
      d2 = h3[1];
      break;
    }
  }
  return d2;
}
var d = (t = 1) => i && window.devicePixelRatio || t;
function l() {
  if (!i)
    return false;
  let t = true;
  try {
    const e = document.createElement("canvas");
    e.getContext && e.getContext("2d") && (t = e.toDataURL("image/webp").indexOf("data:image/webp") === 0);
  } catch (e) {
    t = false;
  }
  return t;
}
var c = function() {
  if (!i)
    return;
  let t = false;
  try {
    let e = Object.defineProperty({}, "passive", { get: function() {
      t = true;
    } });
    window.addEventListener("test", null, e);
  } catch (e) {
  }
  return t;
}();
var u = { on(t, e, i2, s2 = false) {
  c ? t.addEventListener(e, i2, { capture: s2, passive: true }) : t.addEventListener(e, i2, s2);
}, off(t, e, i2, s2 = false) {
  t.removeEventListener(e, i2, s2);
} };
var p = (t, e, i2) => {
  let s2 = new Image();
  if (!t || !t.src) {
    const t2 = new Error("image src is required");
    return i2(t2);
  }
  s2.src = t.src, t.cors && (s2.crossOrigin = t.cors), s2.onload = function() {
    e({ naturalHeight: s2.naturalHeight, naturalWidth: s2.naturalWidth, src: s2.src });
  }, s2.onerror = function(t2) {
    i2(t2);
  };
};
var g = (t, e) => typeof getComputedStyle != "undefined" ? getComputedStyle(t, null).getPropertyValue(e) : t.style[e];
var f = (t) => g(t, "overflow") + g(t, "overflow-y") + g(t, "overflow-x");
function m() {
}
var b = class {
  constructor({ max: t }) {
    this.options = { max: t || 100 }, this._caches = [];
  }
  has(t) {
    return this._caches.indexOf(t) > -1;
  }
  add(t) {
    this.has(t) || (this._caches.push(t), this._caches.length > this.options.max && this.free());
  }
  free() {
    this._caches.shift();
  }
};
var v = class {
  constructor({ el: t, src: e, error: i2, loading: s2, bindType: r2, $parent: n2, options: o2, cors: a2, elRenderer: h3, imageCache: d2 }) {
    this.el = t, this.src = e, this.error = i2, this.loading = s2, this.bindType = r2, this.attempt = 0, this.cors = a2, this.naturalHeight = 0, this.naturalWidth = 0, this.options = o2, this.rect = null, this.$parent = n2, this.elRenderer = h3, this._imageCache = d2, this.performanceData = { init: Date.now(), loadStart: 0, loadEnd: 0 }, this.filter(), this.initState(), this.render("loading", false);
  }
  initState() {
    "dataset" in this.el ? this.el.dataset.src = this.src : this.el.setAttribute("data-src", this.src), this.state = { loading: false, error: false, loaded: false, rendered: false };
  }
  record(t) {
    this.performanceData[t] = Date.now();
  }
  update({ src: t, loading: e, error: i2 }) {
    const s2 = this.src;
    this.src = t, this.loading = e, this.error = i2, this.filter(), s2 !== this.src && (this.attempt = 0, this.initState());
  }
  getRect() {
    this.rect = this.el.getBoundingClientRect();
  }
  checkInView() {
    return this.getRect(), this.rect.top < window.innerHeight * this.options.preLoad && this.rect.bottom > this.options.preLoadTop && this.rect.left < window.innerWidth * this.options.preLoad && this.rect.right > 0;
  }
  filter() {
    Object.keys(this.options.filter).map((t) => {
      this.options.filter[t](this, this.options);
    });
  }
  renderLoading(t) {
    this.state.loading = true, p({ src: this.loading, cors: this.cors }, () => {
      this.render("loading", false), this.state.loading = false, t();
    }, () => {
      t(), this.state.loading = false, this.options.silent || console.warn(`VueLazyload log: load failed with loading image(${this.loading})`);
    });
  }
  load(t = m) {
    return this.attempt > this.options.attempt - 1 && this.state.error ? (this.options.silent || console.log(`VueLazyload log: ${this.src} tried too more than ${this.options.attempt} times`), void t()) : this.state.rendered && this.state.loaded ? void 0 : this._imageCache.has(this.src) ? (this.state.loaded = true, this.render("loaded", true), this.state.rendered = true, t()) : void this.renderLoading(() => {
      this.attempt++, this.options.adapter.beforeLoad && this.options.adapter.beforeLoad(this, this.options), this.record("loadStart"), p({ src: this.src, cors: this.cors }, (e) => {
        this.naturalHeight = e.naturalHeight, this.naturalWidth = e.naturalWidth, this.state.loaded = true, this.state.error = false, this.record("loadEnd"), this.render("loaded", false), this.state.rendered = true, this._imageCache.add(this.src), t();
      }, (t2) => {
        !this.options.silent && console.error(t2), this.state.error = true, this.state.loaded = false, this.render("error", false);
      });
    });
  }
  render(t, e) {
    this.elRenderer(this, t, e);
  }
  performance() {
    let t = "loading", e = 0;
    return this.state.loaded && (t = "loaded", e = (this.performanceData.loadEnd - this.performanceData.loadStart) / 1e3), this.state.error && (t = "error"), { src: this.src, state: t, time: e };
  }
  $destroy() {
    this.el = null, this.src = null, this.error = null, this.loading = null, this.bindType = null, this.attempt = 0;
  }
};
var w = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";
var y = ["scroll", "wheel", "mousewheel", "resize", "animationend", "transitionend", "touchmove"];
var L = { rootMargin: "0px", threshold: 0 };
function _() {
  return class {
    constructor({ preLoad: t, error: e, throttleWait: i2, preLoadTop: s2, dispatchEvent: o2, loading: a2, attempt: h3, silent: c2 = true, scale: u2, listenEvents: p2, filter: g2, adapter: f2, observer: m2, observerOptions: v2 }) {
      this.mode = r, this.ListenerQueue = [], this.TargetIndex = 0, this.TargetQueue = [], this.options = { silent: c2, dispatchEvent: !!o2, throttleWait: i2 || 200, preLoad: t || 1.3, preLoadTop: s2 || 0, error: e || w, loading: a2 || w, attempt: h3 || 3, scale: u2 || d(u2), ListenEvents: p2 || y, hasbind: false, supportWebp: l(), filter: g2 || {}, adapter: f2 || {}, observer: !!m2, observerOptions: v2 || L }, this._initEvent(), this._imageCache = new b({ max: 200 }), this.lazyLoadHandler = function(t2, e2) {
        let i3 = null, s3 = 0;
        return function(...r2) {
          if (i3)
            return;
          let n2 = function() {
            s3 = Date.now(), i3 = false, t2.apply(this, r2);
          };
          Date.now() - s3 >= e2 ? n2() : i3 = setTimeout(n2, e2);
        };
      }(this._lazyLoadHandler.bind(this), this.options.throttleWait), this.setMode(this.options.observer ? n : r);
    }
    config(t = {}) {
      Object.assign(this.options, t);
    }
    performance() {
      return this.ListenerQueue.map((t) => t.performance());
    }
    addLazyBox(t) {
      this.ListenerQueue.push(t), i && (this._addListenerTarget(window), this._observer && this._observer.observe(t.el), t.$el && t.$el.parentNode && this._addListenerTarget(t.$el.parentNode));
    }
    add(e, s2) {
      if (this.ListenerQueue.some((t) => t.el === e))
        return this.update(e, s2), void nextTick(() => this.lazyLoadHandler());
      const r2 = this._valueFormatter(s2.value);
      let { src: n2 } = r2;
      nextTick(() => {
        n2 = h2(e, this.options.scale) || n2, this._observer && this._observer.observe(e);
        const o2 = Object.keys(s2.modifiers)[0];
        let a2;
        o2 && (a2 = s2.instance.$refs[o2], a2 = a2 ? a2.$el || a2 : document.getElementById(o2)), a2 || (a2 = ((t) => {
          if (!i)
            return;
          if (!(t instanceof HTMLElement))
            return window;
          let e2 = t;
          for (; e2 && e2 !== document.body && e2 !== document.documentElement && e2.parentNode; ) {
            if (/(scroll|auto)/.test(f(e2)))
              return e2;
            e2 = e2.parentNode;
          }
          return window;
        })(e));
        const d2 = new v({ el: e, $parent: a2, src: n2, loading: r2.loading, error: r2.error, cors: r2.cors, bindType: s2.arg, elRenderer: this._elRenderer.bind(this), options: this.options, imageCache: this._imageCache });
        this.ListenerQueue.push(d2), i && (this._addListenerTarget(window), this._addListenerTarget(a2)), this.lazyLoadHandler(), nextTick(() => this.lazyLoadHandler());
      });
    }
    update(e, i2) {
      const s2 = this._valueFormatter(i2.value);
      let { src: r2 } = s2;
      r2 = h2(e, this.options.scale) || r2;
      const n2 = this.ListenerQueue.find((t) => t.el === e);
      n2 ? n2.update({ src: r2, error: s2.error, loading: s2.loading }) : this.add(e, i2), this._observer && (this._observer.unobserve(e), this._observer.observe(e)), this.lazyLoadHandler(), nextTick(() => this.lazyLoadHandler());
    }
    remove(t) {
      if (!t)
        return;
      this._observer && this._observer.unobserve(t);
      const e = this.ListenerQueue.find((e2) => e2.el === t);
      e && (this._removeListenerTarget(e.$parent), this._removeListenerTarget(window), a(this.ListenerQueue, e), e.$destroy && e.$destroy());
    }
    removeComponent(t) {
      t && (a(this.ListenerQueue, t), this._observer && this._observer.unobserve(t.el), t.$parent && t.$el.parentNode && this._removeListenerTarget(t.$el.parentNode), this._removeListenerTarget(window));
    }
    setMode(t) {
      s || t !== n || (t = r), this.mode = t, t === r ? (this._observer && (this.ListenerQueue.forEach((t2) => {
        this._observer.unobserve(t2.el);
      }), this._observer = null), this.TargetQueue.forEach((t2) => {
        this._initListen(t2.el, true);
      })) : (this.TargetQueue.forEach((t2) => {
        this._initListen(t2.el, false);
      }), this._initIntersectionObserver());
    }
    _addListenerTarget(t) {
      if (!t)
        return;
      let e = this.TargetQueue.find((e2) => e2.el === t);
      return e ? e.childrenCount++ : (e = { el: t, id: ++this.TargetIndex, childrenCount: 1, listened: true }, this.mode === r && this._initListen(e.el, true), this.TargetQueue.push(e)), this.TargetIndex;
    }
    _removeListenerTarget(t) {
      this.TargetQueue.forEach((e, i2) => {
        e.el === t && (e.childrenCount--, e.childrenCount || (this._initListen(e.el, false), this.TargetQueue.splice(i2, 1), e = null));
      });
    }
    _initListen(t, e) {
      this.options.ListenEvents.forEach((i2) => u[e ? "on" : "off"](t, i2, this.lazyLoadHandler));
    }
    _initEvent() {
      this.Event = { listeners: { loading: [], loaded: [], error: [] } }, this.$on = (t, e) => {
        this.Event.listeners[t] || (this.Event.listeners[t] = []), this.Event.listeners[t].push(e);
      }, this.$once = (t, e) => {
        const i2 = (...s2) => {
          this.$off(t, i2), e.apply(this, s2);
        };
        this.$on(t, i2);
      }, this.$off = (t, e) => {
        if (e)
          a(this.Event.listeners[t], e);
        else {
          if (!this.Event.listeners[t])
            return;
          this.Event.listeners[t].length = 0;
        }
      }, this.$emit = (t, e, i2) => {
        this.Event.listeners[t] && this.Event.listeners[t].forEach((t2) => t2(e, i2));
      };
    }
    _lazyLoadHandler() {
      const t = [];
      this.ListenerQueue.forEach((e) => {
        e.el && e.el.parentNode || t.push(e);
        e.checkInView() && e.load();
      }), t.forEach((t2) => {
        a(this.ListenerQueue, t2), t2.$destroy && t2.$destroy();
      });
    }
    _initIntersectionObserver() {
      s && (this._observer = new IntersectionObserver(this._observerHandler.bind(this), this.options.observerOptions), this.ListenerQueue.length && this.ListenerQueue.forEach((t) => {
        this._observer.observe(t.el);
      }));
    }
    _observerHandler(t) {
      t.forEach((t2) => {
        t2.isIntersecting && this.ListenerQueue.forEach((e) => {
          if (e.el === t2.target) {
            if (e.state.loaded)
              return this._observer.unobserve(e.el);
            e.load();
          }
        });
      });
    }
    _elRenderer(t, e, i2) {
      if (!t.el)
        return;
      const { el: s2, bindType: r2 } = t;
      let n2;
      switch (e) {
        case "loading":
          n2 = t.loading;
          break;
        case "error":
          n2 = t.error;
          break;
        default:
          n2 = t.src;
      }
      if (r2 ? s2.style[r2] = 'url("' + n2 + '")' : s2.getAttribute("src") !== n2 && s2.setAttribute("src", n2), s2.setAttribute("lazy", e), this.$emit(e, t, i2), this.options.adapter[e] && this.options.adapter[e](t, this.options), this.options.dispatchEvent) {
        const i3 = new o(e, { detail: t });
        s2.dispatchEvent(i3);
      }
    }
    _valueFormatter(t) {
      let e = t, { loading: i2, error: s2 } = this.options;
      var r2;
      return (r2 = t) !== null && typeof r2 == "object" && (t.src || this.options.silent || console.error("Vue Lazyload warning: miss src with " + t), e = t.src, i2 = t.loading || this.options.loading, s2 = t.error || this.options.error), { src: e, loading: i2, error: s2 };
    }
  };
}
var E = (t) => ({ props: { tag: { type: String, default: "div" } }, emits: ["show"], render() {
  return h(this.tag, null, this.show && this.$slots.default ? this.$slots.default() : null);
}, data: () => ({ el: null, state: { loaded: false }, rect: {}, show: false }), mounted() {
  this.el = this.$el, t.addLazyBox(this), t.lazyLoadHandler();
}, beforeUnmount() {
  t.removeComponent(this);
}, methods: { getRect() {
  this.rect = this.$el.getBoundingClientRect();
}, checkInView() {
  return this.getRect(), i && this.rect.top < window.innerHeight * t.options.preLoad && this.rect.bottom > 0 && this.rect.left < window.innerWidth * t.options.preLoad && this.rect.right > 0;
}, load() {
  this.show = true, this.state.loaded = true, this.$emit("show", this);
}, destroy() {
  return this.$destroy;
} } });
var z = { selector: "img" };
var A = class {
  constructor({ el: t, binding: e, lazy: i2 }) {
    this.el = null, this.binding = e, this.options = {}, this.lazy = i2, this.update({ el: t, binding: e });
  }
  update({ el: t, binding: e }) {
    this.el = t, this.options = Object.assign({}, z, e.value);
    this.getImgs().forEach((t2) => {
      this.lazy.add(t2, Object.assign({}, this.binding, { value: { src: "dataset" in t2 ? t2.dataset.src : t2.getAttribute("data-src"), error: ("dataset" in t2 ? t2.dataset.error : t2.getAttribute("data-error")) || this.options.error, loading: ("dataset" in t2 ? t2.dataset.loading : t2.getAttribute("data-loading")) || this.options.loading } }));
    });
  }
  getImgs() {
    return Array.from(this.el.querySelectorAll(this.options.selector));
  }
  clear() {
    this.getImgs().forEach((t) => this.lazy.remove(t)), this.binding = null, this.lazy = null;
  }
};
var $ = class {
  constructor({ lazy: t }) {
    this.lazy = t, this._queue = [];
  }
  bind(t, e) {
    const i2 = new A({ el: t, binding: e, lazy: this.lazy });
    this._queue.push(i2);
  }
  update(t, e) {
    const i2 = this._queue.find((e2) => e2.el === t);
    i2 && i2.update({ el: t, binding: e });
  }
  unbind(t) {
    const e = this._queue.find((e2) => e2.el === t);
    e && (e.clear(), a(this._queue, e));
  }
};
var I = (t) => ({ props: { src: [String, Object], tag: { type: String, default: "img" } }, render() {
  return h(this.tag, { src: this.renderSrc }, this.$slots.default ? this.$slots.default() : null);
}, data: () => ({ el: null, options: { src: "", error: "", loading: "", attempt: t.options.attempt }, state: { loaded: false, error: false, attempt: 0 }, rect: {}, renderSrc: "" }), watch: { src() {
  this.init(), t.addLazyBox(this), t.lazyLoadHandler();
} }, created() {
  this.init(), this.renderSrc = this.options.loading;
}, mounted() {
  this.el = this.$el, t.addLazyBox(this), t.lazyLoadHandler();
}, beforeUnmount() {
  t.removeComponent(this);
}, methods: { init() {
  const { src: e, loading: i2, error: s2 } = t._valueFormatter(this.src);
  this.state.loaded = false, this.options.src = e, this.options.error = s2, this.options.loading = i2, this.renderSrc = this.options.loading;
}, getRect() {
  this.rect = this.$el.getBoundingClientRect();
}, checkInView() {
  return this.getRect(), i && this.rect.top < window.innerHeight * t.options.preLoad && this.rect.bottom > 0 && this.rect.left < window.innerWidth * t.options.preLoad && this.rect.right > 0;
}, load(e = m) {
  if (this.state.attempt > this.options.attempt - 1 && this.state.error)
    return t.options.silent || console.log(`VueLazyload log: ${this.options.src} tried too more than ${this.options.attempt} times`), void e();
  const i2 = this.options.src;
  p({ src: i2 }, ({ src: t2 }) => {
    this.renderSrc = t2, this.state.loaded = true;
  }, () => {
    this.state.attempt++, this.renderSrc = this.options.error, this.state.error = true;
  });
} } });
var T = { install(t, e = {}) {
  if (Number(t.version.split(".")[0]) < 3)
    return new Error("Vue version at least 3.0");
  const i2 = new (_())(e), s2 = new $({ lazy: i2 });
  t.provide("Lazyload", i2), t.config.globalProperties.$Lazyload = i2, e.lazyComponent && t.component("LazyComponent", E(i2)), e.lazyImage && t.component("LazyImage", I(i2)), t.directive("lazy", { beforeMount: i2.add.bind(i2), updated: i2.update.bind(i2), unmounted: i2.remove.bind(i2) }), t.directive("lazy-container", { beforeMount: s2.bind.bind(s2), updated: s2.update.bind(s2), unmounted: s2.unbind.bind(s2) });
} };
var vue_lazyload_es_default = T;

// dep:@jambonn_vue-lazyload
var jambonn_vue_lazyload_default = vue_lazyload_es_default;
export {
  jambonn_vue_lazyload_default as default
};
//# sourceMappingURL=@jambonn_vue-lazyload.js.map
